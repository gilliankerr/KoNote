# PIPEDA Privacy Compliance Review â€” KoNote2

**Date:** 2026-02-06
**Reviewer:** Jules (Privacy Compliance Specialist)
**Scope:** Application code, data models, encryption, and export workflows.

## Compliance Summary

| PIPEDA Principle | Status | Notes |
|-----------------|--------|-------|
| 1. Accountability | **Partial** | Privacy policy template exists, but no system setting for Privacy Officer contact details. |
| 2. Identifying Purposes | **Partial** | Purposes are inferred from field names; no UI tooltips or "why we need this" explanations for standard fields. |
| 3. Consent | **Compliant** | robust consent capture (types, dates) and withdrawal via erasure workflows. |
| 4. Limiting Collection | **Compliant** | Custom fields allow limiting collection; registration forms are configurable. |
| 5. Limiting Use, Disclosure, and Retention | **Partial** | Retention dates are tracked, but purging is manual. Strong export controls exist. |
| 6. Accuracy | **Partial** | Staff-mediated updates only; no client portal for self-correction. |
| 7. Safeguards | **Compliant** | Strong encryption (Fernet), strict RBAC, delayed elevated exports, and audit logging. |
| 8. Openness | **Compliant** | Comprehensive privacy policy template provided in documentation. |
| 9. Individual Access | **Compliant** | Admin-only exports and multi-PM erasure workflow support individual access rights. |
| 10. Challenging Compliance | **Compliant** | Complaint process outlined in policy template. |

## Findings by Severity

### [HIGH-001] Lack of Automated Retention Enforcement

- **Principle:** 5. Limiting Use, Disclosure, and Retention
- **Location:** `apps/clients/erasure.py` (logic), `apps/clients/models.py` (`retention_expires`)
- **Gap:** While the system tracks `retention_expires` and restricts "full erasure" *before* this date, there is no automated process (e.g., cron job or Celery task) to flag or automatically purge records *after* the date passes.
- **Risk:** Regulatory non-compliance. Data may be retained indefinitely if staff fail to manually review and request erasure for expired files.
- **Recommendation:** Implement a daily management command to identify expired records and either:
    1. Automatically transition them to a "pending erasure" state.
    2. Send a daily digest email to the Privacy Officer/Admins listing records ready for purging.
- **Agency action needed:** Manually review client lists for expired retention dates until automation is implemented.

### [MED-001] Absence of Designated Privacy Officer Configuration

- **Principle:** 1. Accountability
- **Location:** `konote/settings/base.py`, `templates/`
- **Gap:** There is no configuration setting (e.g., `PRIVACY_OFFICER_EMAIL`) to programmatically inject contact details into error messages, footer templates, or automated emails. The privacy policy template requires manual find-and-replace.
- **Risk:** Inconsistent communication of privacy contact information across the application.
- **Recommendation:** Add `PRIVACY_OFFICER_NAME` and `PRIVACY_OFFICER_EMAIL` to `InstanceSettings` or environment variables and expose them in the template context.
- **Agency action needed:** Hardcode the Privacy Officer's contact details into the privacy policy and manually distribute them to staff.

### [MED-002] Identifying Purposes Not Explicit in UI

- **Principle:** 2. Identifying Purposes
- **Location:** `apps/clients/forms.py`, `apps/registration/models.py`
- **Gap:** The application collects PII (names, DOB) without explicitly displaying the specific purpose for each field in the user interface (e.g., "DOB is required for unique identification and age-appropriate program matching").
- **Risk:** Low risk of confusion for staff, but potential transparency gap for clients during self-registration.
- **Recommendation:** Add `help_text` to standard PII fields explaining their purpose, or include a "Why we ask for this" summary block on registration forms.
- **Agency action needed:** Ensure the Privacy Policy (which details purposes) is linked clearly from all registration forms.

### [LOW-001] Lack of Client Self-Correction Capability

- **Principle:** 6. Accuracy
- **Location:** N/A (Missing feature)
- **Gap:** Clients cannot log in to view or correct their own data. All corrections must be mediated by staff.
- **Risk:** Minor risk of data becoming stale if clients find it difficult to contact staff for updates.
- **Recommendation:** Future roadmap: Consider a "client portal" or a "secure link" mechanism for clients to review and update their core demographics.
- **Agency action needed:** Establish a clear operational process for verifying client information at regular intervals (e.g., annual check-in).

## Agency Deployment Checklist

The following actions are the responsibility of the deploying agency and cannot be solved by code changes alone:

- [ ] **Designate Privacy Officer:** Appoint a specific individual and ensure their contact info is in the Privacy Policy.
- [ ] **Customise Policy:** Edit `docs/privacy-policy-template.md`, replace all `[PLACEHOLDERS]`, and publish it (e.g., on the login page or agency website).
- [ ] **Define Retention Periods:** Establish a written policy for how long data is kept (e.g., "7 years after discharge") and ensure staff enter the correct `retention_expires` date for every client.
- [ ] **Manual Purge Schedule:** Until automation is added, schedule a monthly review of clients with passed retention dates to initiate the erasure workflow.
- [ ] **Breach Response Plan:** Create an offline document detailing the response plan (Who to call? When to notify the Commissioner?) as per the template.
- [ ] **Staff Training:** Train staff on:
    - Never sharing passwords.
    - Only exporting data when absolutely necessary.
    - Recognizing the importance of the `is_demo` flag (keeping test data separate).
    - The erasure request workflow.

## Recommendations for Development Team

1.  **Automate Retention Alerting:** Create a background task that emails Admins/Privacy Officers when client records exceed their `retention_expires` date.
2.  **Anomaly Detection:** Enhance `AuditMiddleware` to flag "impossible travel" (logins from different countries in short spans) or bulk export velocity (e.g., >3 exports in an hour).
3.  **Privacy Settings Module:** Add a dedicated section in Admin Settings to configure Privacy Officer details, automatic retention policies, and breach notification contacts, removing the need for hardcoded template edits.
