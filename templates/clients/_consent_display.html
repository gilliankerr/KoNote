{% load i18n %}
{# Partial: Read-only display of consent status with record button #}
<div class="consent-header">
    <h2 id="consent-heading">{% trans "Privacy Consent" %}</h2>
    {% if not is_receptionist %}
    <button type="button"
            class="outline secondary"
            hx-get="{% url 'clients:client_consent_edit' client_id=client.pk %}"
            hx-target="#consent-section"
            hx-swap="innerHTML"
            aria-describedby="consent-heading"
            aria-label="{% if client.consent_given_at %}{% trans 'Update consent record' %}{% else %}{% trans 'Record consent' %}{% endif %}">
        {% if client.consent_given_at %}{% trans "Update" %}{% else %}{% trans "Record Consent" %}{% endif %}
    </button>
    {% endif %}
</div>

{% if client.consent_given_at %}
<dl class="info-grid">
    <dt>{% trans "Status" %}</dt>
    <dd><span class="badge success">{% trans "Consent recorded" %}</span></dd>
    <dt>{% trans "Type" %}</dt>
    <dd>{{ client.consent_type|default:"â€”" }}</dd>
    <dt>{% trans "Date recorded" %}</dt>
    <dd>{{ client.consent_given_at|date:"Y-m-d" }}</dd>
</dl>
{% else %}
<p class="notice warning" role="alert">
    <strong>{% trans "No consent on file." %}</strong>
    {% trans "Consent must be recorded before progress notes can be created for this" %} {{ term.client|default:"client" }}.
</p>
{% endif %}
